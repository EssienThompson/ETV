[gd_scene load_steps=19 format=3 uid="uid://shbact1orxrb"]

[ext_resource type="Script" path="res://scripts/restLevel.gd" id="1_3pdoo"]
[ext_resource type="Material" uid="uid://b3bcnspskkc4k" path="res://mats/shadowObj.tres" id="3_c1ej4"]
[ext_resource type="Material" uid="uid://qjy736ia770r" path="res://mats/manMatt.tres" id="3_cal31"]
[ext_resource type="Shader" path="res://shaders/world.gdshader" id="3_rnidf"]
[ext_resource type="Material" uid="uid://xlcs6o2eykhi" path="res://mats/shadow.tres" id="4_5xe0b"]
[ext_resource type="PackedScene" uid="uid://cwtnlojrisbnh" path="res://scenes/npcRelated/magision.tscn" id="4_kaygy"]
[ext_resource type="PackedScene" uid="uid://r7rq8dwv02br" path="res://models/levels/campfire.tscn" id="5_ffrpi"]
[ext_resource type="Environment" uid="uid://dh35wtmm60qnx" path="res://mats/environment.tres" id="6_7obnd"]
[ext_resource type="PackedScene" uid="uid://c70owo4ydyf0t" path="res://scenes/relics/greyl.tscn" id="8_0jat1"]
[ext_resource type="PackedScene" uid="uid://bs01qwyxnt877" path="res://scenes/player/player.tscn" id="10_ldkxj"]
[ext_resource type="PackedScene" uid="uid://c0gdwr424qs6s" path="res://scenes/enemyRelated/zomb.tscn" id="11_o2j1b"]

[sub_resource type="NavigationMesh" id="NavigationMesh_cg2nv"]
vertices = PackedVector3Array(-5.43396, 0.49146, -27, -3.43396, 0.49146, -27, -3.43396, 0.49146, -248, -6.43396, 0.49146, -26.5, -7.18396, 0.49146, -25.25, -247.934, 0.49146, -248, -247.934, 0.49146, -24, -7.18396, 0.49146, -23.75, 3.31604, 0.49146, -27, 3.31604, 0.49146, -248, 5.31604, 0.49146, -27, 6.31604, 0.49146, -26.5, 7.06604, 0.49146, -25.25, 248.066, 0.49146, -23.5, 248.066, 0.49146, -248, 7.06604, 0.49146, -23.5, -247.934, 0.49146, -22.75, -7.18396, 0.49146, -23, 3.56604, 0.49146, -19.75, 3.56604, 0.49146, 21, 5.31604, 0.49146, 21, 5.31604, 0.49146, -19.75, 7.06604, 0.49146, -21.5, 6.56604, 0.49146, -20.5, 6.56604, 0.49146, 21.75, 7.06604, 0.49146, 22.75, 7.06604, 0.49146, 24.75, 248.066, 0.49146, 24.75, -6.43396, 0.49146, 21.5, -3.68396, 0.49146, 21, -3.68396, 0.49146, -19.75, -6.43396, 0.49146, -20.25, -247.934, 0.49146, 24, -7.18396, 0.49146, 24.25, -7.18396, 0.49146, 22.75, -7.18396, 0.49146, -21.5, -247.934, 0.49146, 25.25, -7.18396, 0.49146, 25, 5.31604, 0.49146, 28.25, 3.81604, 0.49146, 28.25, 4.06604, 0.49146, 248, 6.56604, 0.49146, 27.5, 248.066, 0.49146, 248, -4.18396, 0.49146, 248, -3.93396, 0.49146, 28.25, -5.43396, 0.49146, 28.25, -6.68396, 0.49146, 27.5, -247.934, 0.49146, 248)
polygons = [PackedInt32Array(2, 1, 0), PackedInt32Array(2, 0, 3), PackedInt32Array(3, 4, 2), PackedInt32Array(2, 4, 6), PackedInt32Array(2, 6, 5), PackedInt32Array(4, 7, 6), PackedInt32Array(2, 9, 1), PackedInt32Array(1, 9, 8), PackedInt32Array(10, 8, 9), PackedInt32Array(11, 10, 9), PackedInt32Array(11, 9, 12), PackedInt32Array(12, 9, 14), PackedInt32Array(12, 14, 13), PackedInt32Array(13, 15, 12), PackedInt32Array(17, 16, 7), PackedInt32Array(7, 16, 6), PackedInt32Array(21, 20, 18), PackedInt32Array(18, 20, 19), PackedInt32Array(22, 15, 13), PackedInt32Array(21, 23, 20), PackedInt32Array(20, 23, 24), PackedInt32Array(27, 26, 25), PackedInt32Array(23, 22, 24), PackedInt32Array(24, 22, 25), PackedInt32Array(25, 22, 13), PackedInt32Array(25, 13, 27), PackedInt32Array(29, 28, 30), PackedInt32Array(30, 28, 31), PackedInt32Array(34, 33, 32), PackedInt32Array(28, 34, 31), PackedInt32Array(31, 34, 35), PackedInt32Array(35, 34, 32), PackedInt32Array(35, 32, 16), PackedInt32Array(16, 17, 35), PackedInt32Array(30, 18, 29), PackedInt32Array(29, 18, 19), PackedInt32Array(37, 36, 33), PackedInt32Array(33, 36, 32), PackedInt32Array(40, 39, 38), PackedInt32Array(40, 38, 41), PackedInt32Array(41, 26, 40), PackedInt32Array(40, 26, 27), PackedInt32Array(40, 27, 42), PackedInt32Array(45, 44, 43), PackedInt32Array(46, 45, 43), PackedInt32Array(46, 43, 37), PackedInt32Array(37, 43, 36), PackedInt32Array(36, 43, 47), PackedInt32Array(44, 39, 43), PackedInt32Array(43, 39, 40)]
agent_height = 5.0
agent_radius = 2.0

[sub_resource type="BoxMesh" id="BoxMesh_3l8vy"]
resource_local_to_scene = true
material = ExtResource("3_cal31")
size = Vector3(10, 10, 3)

[sub_resource type="BoxShape3D" id="BoxShape3D_pocw5"]
size = Vector3(10, 10, 3)

[sub_resource type="BoxMesh" id="BoxMesh_p0prn"]
material = ExtResource("3_cal31")
size = Vector3(500, 0.5, 500)

[sub_resource type="BoxShape3D" id="BoxShape3D_crp1b"]
size = Vector3(500, 0.5, 500)

[sub_resource type="BoxShape3D" id="BoxShape3D_85c50"]
size = Vector3(1, 25, 500)

[sub_resource type="ShaderMaterial" id="ShaderMaterial_oqaaw"]
shader = ExtResource("3_rnidf")
shader_parameter/obj = 0

[node name="test_level" type="Node3D" groups=["persist"]]
script = ExtResource("1_3pdoo")
diaID = "rest"

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="."]
navigation_mesh = SubResource("NavigationMesh_cg2nv")

[node name="wall" type="StaticBody3D" parent="NavigationRegion3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 4.98884, 24.5571)
collision_layer = 97
metadata/_edit_group_ = true

[node name="wall" type="MeshInstance3D" parent="NavigationRegion3D/wall"]
mesh = SubResource("BoxMesh_3l8vy")

[node name="CollisionShape3D" type="CollisionShape3D" parent="NavigationRegion3D/wall"]
shape = SubResource("BoxShape3D_pocw5")

[node name="shad" type="MeshInstance3D" parent="NavigationRegion3D/wall"]
transform = Transform3D(1.001, 0, 0, 0, 1.001, 0, 0, 0, 1.001, 0, 0, 0)
material_override = ExtResource("3_c1ej4")
mesh = SubResource("BoxMesh_3l8vy")
skeleton = NodePath("../wall")

[node name="wall2" type="StaticBody3D" parent="NavigationRegion3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 4.98884, -23.2897)
metadata/_edit_group_ = true

[node name="wall" type="MeshInstance3D" parent="NavigationRegion3D/wall2"]
mesh = SubResource("BoxMesh_3l8vy")

[node name="CollisionShape3D" type="CollisionShape3D" parent="NavigationRegion3D/wall2"]
shape = SubResource("BoxShape3D_pocw5")

[node name="StaticBody3D" type="StaticBody3D" parent="NavigationRegion3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0660386, -0.25854, 0)
collision_layer = 8
collision_mask = 9
metadata/_edit_group_ = true

[node name="shadows" type="MeshInstance3D" parent="NavigationRegion3D/StaticBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.01, 0)
material_override = ExtResource("4_5xe0b")
mesh = SubResource("BoxMesh_p0prn")

[node name="floor" type="MeshInstance3D" parent="NavigationRegion3D/StaticBody3D"]
mesh = SubResource("BoxMesh_p0prn")

[node name="CollisionShape3D" type="CollisionShape3D" parent="NavigationRegion3D/StaticBody3D"]
shape = SubResource("BoxShape3D_crp1b")

[node name="StaticBody3D" type="StaticBody3D" parent="NavigationRegion3D/StaticBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 250, 0, 0)

[node name="CollisionShape3D" type="CollisionShape3D" parent="NavigationRegion3D/StaticBody3D/StaticBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 12.5, 0)
shape = SubResource("BoxShape3D_85c50")

[node name="StaticBody3D2" type="StaticBody3D" parent="NavigationRegion3D/StaticBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -250, 0, 0)

[node name="CollisionShape3D" type="CollisionShape3D" parent="NavigationRegion3D/StaticBody3D/StaticBody3D2"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 12.5, 0)
shape = SubResource("BoxShape3D_85c50")

[node name="StaticBody3D3" type="StaticBody3D" parent="NavigationRegion3D/StaticBody3D"]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 0, 0, 250)

[node name="CollisionShape3D" type="CollisionShape3D" parent="NavigationRegion3D/StaticBody3D/StaticBody3D3"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 12.5, 0)
shape = SubResource("BoxShape3D_85c50")

[node name="StaticBody3D4" type="StaticBody3D" parent="NavigationRegion3D/StaticBody3D"]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 0, 0, -250)

[node name="CollisionShape3D" type="CollisionShape3D" parent="NavigationRegion3D/StaticBody3D/StaticBody3D4"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 12.5, 0)
shape = SubResource("BoxShape3D_85c50")

[node name="CanvasLayer" type="CanvasLayer" parent="."]
layer = -1

[node name="ColorRect" type="ColorRect" parent="CanvasLayer"]
visible = false
material = SubResource("ShaderMaterial_oqaaw")
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
color = Color(0, 0, 0, 1)

[node name="magision" parent="." instance=ExtResource("4_kaygy")]
transform = Transform3D(-0.749002, 0, 0.0386769, 0, 0.75, 0, -0.0386769, 0, -0.749002, 8.09104, -0.00854, 11.9935)

[node name="Skeleton3D" parent="magision/meshes/Armature" index="0"]
bones/47/rotation = Quaternion(-0.706003, -0.0413906, 0.0240706, 0.706589)

[node name="Mask\'" parent="magision/meshes/Armature/Skeleton3D" index="6"]
blend_shapes/eyesClose = 0.0

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = ExtResource("6_7obnd")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="WorldEnvironment"]
transform = Transform3D(0.944791, 0.272117, 0.182543, -0.30632, 0.535658, 0.786918, 0.116353, -0.799389, 0.58944, -0.11829, 13.6619, 0)
shadow_enabled = true

[node name="playerSpawn" type="Marker3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -17.4257)

[node name="campfire" parent="." instance=ExtResource("5_ffrpi")]
transform = Transform3D(2, 0, 0, 0, 2, 0, 0, 0, 2, 0, 0, 0)

[node name="Greyl" parent="." instance=ExtResource("8_0jat1")]
transform = Transform3D(-0.932469, 0, -0.36125, 0, 1, 0, 0.36125, 0, -0.932469, 16.0554, -0.00854, 12.746)

[node name="Player" parent="." instance=ExtResource("10_ldkxj")]
transform = Transform3D(0.749957, 0, -0.00806328, 0, 0.75, 0, 0.00806328, 0, 0.749957, 3.3917, -0.00854, -10.0814)

[node name="zomb" parent="." instance=ExtResource("11_o2j1b")]
transform = Transform3D(0.75, 0, 0, 0, 0.75, 0, 0, 0, 0.75, -4.4841, 2.63131, 1.20034)

[editable path="magision"]
